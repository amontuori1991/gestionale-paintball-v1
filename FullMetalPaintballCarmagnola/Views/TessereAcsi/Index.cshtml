@model List<Full_Metal_Paintball_Carmagnola.Models.RangeTessereAcsi>

@{
    ViewData["Title"] = "Gestione Tessere ACSI";
}

<div class="content-container">
    <h2 class="text-center">Gestione Tessere ACSI</h2>

    <form asp-action="AddRange" method="post" class="mb-4">
        <div class="row g-3 align-items-center justify-content-center">
            <div class="col-auto">
                <label for="NumeroIniziale" class="form-label">Da Numero</label>
                <input type="number" class="form-control" id="NumeroIniziale" name="NumeroIniziale" required />
            </div>
            <div class="col-auto">
                <label for="NumeroFinale" class="form-label">A Numero</label>
                <input type="number" class="form-control" id="NumeroFinale" name="NumeroFinale" required />
            </div>
            <div class="col-auto">
                <button type="submit" class="btn btn-primary mt-3">Aggiungi Range</button>
            </div>
        </div>
    </form>

    <hr />

    <form method="get" class="mb-4">
        <div class="input-group d-flex justify-content-center">
            <input type="number" name="numeroTessera" class="form-control" placeholder="Filtra per numero tessera" value="@Context.Request.Query["numeroTessera"]" style="max-width: 250px;" />
            <button type="submit" class="btn btn-outline-secondary">Filtra</button>
            <a href="@Url.Action("Index")" class="btn btn-outline-danger">Reset</a>
        </div>
    </form>

    <h3 class="text-center">Tessere a disposizione</h3>

    <div class="table-responsive">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Tessere Disponibili</th>
                    <th>Tessere Assegnate</th>
                </tr>
            </thead>
            <tbody>
                @{
                    var tessereDisponibili = new List<long>();
                    var tessereAssegnate = new List<long>();

                    foreach (var range in Model)
                    {
                        for (long i = range.NumeroDa; i <= range.NumeroA; i++)
                        {
                            if (range.Assegnata)
                                tessereAssegnate.Add(i);
                            else
                                tessereDisponibili.Add(i);
                        }
                    }

                    int maxRows = Math.Max(tessereDisponibili.Count, tessereAssegnate.Count);

                    for (int row = 0; row < maxRows; row++)
                    {
                        <tr>
                            <td>@(row<tessereDisponibili.Count? tessereDisponibili[row].ToString() : "")</td>
                            <td>@(row<tessereAssegnate.Count? tessereAssegnate[row].ToString() : "")</td>
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>
</div>